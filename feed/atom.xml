<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
  <title>Wonderland</title>
  <subtitle>A Blog</subtitle>
  <link href="http://blog.leshill.org//" rel="self" />
  <link href="http://blog.leshill.org/" />
  <updated>2009-06-03T13:33:07-04:00</updated>
  <author>
    <name>Les Hill</name>
    <email>blog@leshill.org</email>
  </author>
  <id>http://blog.leshill.org/</id>
  
  <entry>
    <title>Truncating HTML</title>
    <link href="http://blog.leshill.org/blog/2009/06/03/truncating-html.html" />
    
    <id>tag:blog.leshill.org,2009-06-03:1244046220</id>
    
    <published>2009-06-03T12:23:40-04:00</published>
    <updated>2009-06-03T12:23:40-04:00</updated>
    <content type="html">&lt;p&gt;We recently needed to show a truncated version of existing HTML content.  Although there are several issues&lt;sup class=&quot;footnote&quot;&gt;&lt;a href=&quot;#fn1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; when dealing with HTML content, our specific concern was maintaining the integrity of the HTML.   Some quick googling led to a nice helper written by &lt;a href=&quot;http://henrik.nyh.se&quot;&gt;Henrik Nyh&lt;/a&gt; last year.  We tweaked the original a bit to append the ellipsis within the tag at the truncation point and truncate at a word (or tag) boundary.  Here it is, enjoy.&lt;/p&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# By Henrik Nyh &amp;lt;http://henrik.nyh.se&amp;gt; 2008-01-30.&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Free to modify and redistribute with credit.&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Word truncation and fixes by Les Hill &amp;lt;http://blog.leshill.org&amp;gt; 2009-06-02&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 4&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt; 5&lt;/span&gt; require &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;rubygems&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 6&lt;/span&gt; require &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;hpricot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 7&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;TextHelper&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 9&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;# Like the Rails _truncate_ helper but doesn't break HTML tags or entities.&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;11&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;truncate_html&lt;/span&gt;(text, max_length = &lt;span class=&quot;i&quot;&gt;30&lt;/span&gt;, ellipsis = &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;)
&lt;span class=&quot;no&quot;&gt;12&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;if&lt;/span&gt; text.nil?
&lt;span class=&quot;no&quot;&gt;13&lt;/span&gt;     doc = Hpricot(text.to_s)
&lt;span class=&quot;no&quot;&gt;14&lt;/span&gt;     doc.inner_text.chars.length &amp;gt; max_length ? doc.truncate(max_length, ellipsis).inner_html : text.to_s
&lt;span class=&quot;no&quot;&gt;15&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;16&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;17&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;.truncate_at_space(text, max_length, ellipsis = &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;/span&gt;)
&lt;span class=&quot;no&quot;&gt;18&lt;/span&gt;     l = [max_length - ellipsis.length, &lt;span class=&quot;i&quot;&gt;0&lt;/span&gt;].max
&lt;span class=&quot;no&quot;&gt;19&lt;/span&gt;     stop = text.rindex(&lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt; &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;/span&gt;, l) || &lt;span class=&quot;i&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;20&lt;/strong&gt;&lt;/span&gt;     (text.length &amp;gt; max_length ? text[&lt;span class=&quot;i&quot;&gt;0&lt;/span&gt;...stop] + ellipsis : text).to_s
&lt;span class=&quot;no&quot;&gt;21&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;23&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;HpricotTruncator&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;25&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;NodeWithChildren&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;26&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;truncate&lt;/span&gt;(max_length, ellipsis)
&lt;span class=&quot;no&quot;&gt;27&lt;/span&gt;       &lt;span class=&quot;r&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;if&lt;/span&gt; inner_text.chars.length &amp;lt;= max_length
&lt;span class=&quot;no&quot;&gt;28&lt;/span&gt;       truncated_node = dup
&lt;span class=&quot;no&quot;&gt;29&lt;/span&gt;       truncated_node.name = name
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;30&lt;/strong&gt;&lt;/span&gt;       truncated_node.raw_attributes = raw_attributes
&lt;span class=&quot;no&quot;&gt;31&lt;/span&gt;       truncated_node.children = []
&lt;span class=&quot;no&quot;&gt;32&lt;/span&gt;       each_child &lt;span class=&quot;r&quot;&gt;do&lt;/span&gt; |node|
&lt;span class=&quot;no&quot;&gt;33&lt;/span&gt;         &lt;span class=&quot;r&quot;&gt;break&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;if&lt;/span&gt; max_length &amp;lt;= &lt;span class=&quot;i&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;34&lt;/span&gt;         node_length = node.inner_text.chars.length
&lt;span class=&quot;no&quot;&gt;35&lt;/span&gt;         truncated_node.children &amp;lt;&amp;lt; node.truncate(max_length, ellipsis)
&lt;span class=&quot;no&quot;&gt;36&lt;/span&gt;         max_length = max_length - node_length
&lt;span class=&quot;no&quot;&gt;37&lt;/span&gt;       &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;38&lt;/span&gt;       truncated_node
&lt;span class=&quot;no&quot;&gt;39&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;40&lt;/strong&gt;&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;41&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;42&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;TextNode&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;43&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;truncate&lt;/span&gt;(max_length, ellipsis)
&lt;span class=&quot;no&quot;&gt;44&lt;/span&gt;       &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;.content = &lt;span class=&quot;co&quot;&gt;TextHelper&lt;/span&gt;.truncate_at_space(content, max_length, ellipsis)
&lt;span class=&quot;no&quot;&gt;45&lt;/span&gt;       &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;46&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;47&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;48&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;49&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;IgnoredTag&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;50&lt;/strong&gt;&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;truncate&lt;/span&gt;(max_length, ellipsis)
&lt;span class=&quot;no&quot;&gt;51&lt;/span&gt;       &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;52&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;53&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;54&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;55&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;56&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;Hpricot&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;Doc&lt;/span&gt;.send(&lt;span class=&quot;sy&quot;&gt;:include&lt;/span&gt;,       &lt;span class=&quot;co&quot;&gt;HpricotTruncator&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;NodeWithChildren&lt;/span&gt;)
&lt;span class=&quot;no&quot;&gt;57&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;Hpricot&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;Elem&lt;/span&gt;.send(&lt;span class=&quot;sy&quot;&gt;:include&lt;/span&gt;,      &lt;span class=&quot;co&quot;&gt;HpricotTruncator&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;NodeWithChildren&lt;/span&gt;)
&lt;span class=&quot;no&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;Hpricot&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;Text&lt;/span&gt;.send(&lt;span class=&quot;sy&quot;&gt;:include&lt;/span&gt;,      &lt;span class=&quot;co&quot;&gt;HpricotTruncator&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;TextNode&lt;/span&gt;)
&lt;span class=&quot;no&quot;&gt;59&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;Hpricot&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;BogusETag&lt;/span&gt;.send(&lt;span class=&quot;sy&quot;&gt;:include&lt;/span&gt;, &lt;span class=&quot;co&quot;&gt;HpricotTruncator&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;IgnoredTag&lt;/span&gt;)
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;60&lt;/strong&gt;&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;Hpricot&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;Comment&lt;/span&gt;.send(&lt;span class=&quot;sy&quot;&gt;:include&lt;/span&gt;,   &lt;span class=&quot;co&quot;&gt;HpricotTruncator&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;IgnoredTag&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt; For example: preventing XSS attacks, maintaining coherent styling.&lt;/p&gt;</content>
  </entry>
  
  <entry>
    <title>AWS S3 Bucket Copy</title>
    <link href="http://blog.leshill.org/blog/2009/05/28/aws-s3-bucket-copy.html" />
    
    <id>tag:blog.leshill.org,2009-05-28:1243539824</id>
    
    <published>2009-05-28T15:43:44-04:00</published>
    <updated>2009-05-28T15:43:44-04:00</updated>
    <content type="html">&lt;p&gt;We use &lt;a href=&quot;http://aws.amazon.com/s3/&quot;&gt;S3&lt;/a&gt; for a lot of our projects using the &lt;a href=&quot;http://amazon.rubyforge.org/&quot;&gt;aws-s3&lt;/a&gt; gem.  One thing that has continually plagued me is copying objects from one bucket to another.  Having rewritten this snippet of code twice already, I am placing it here for future reference.  Enjoy.&lt;/p&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;S3Object&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 2&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;.copy_across_buckets(src_bucket, src_key, dest_bucket, dest_key, options = {})
&lt;span class=&quot;no&quot;&gt; 3&lt;/span&gt;     original = open(url_for(src_key, src_bucket))
&lt;span class=&quot;no&quot;&gt; 4&lt;/span&gt;     default_options = {&lt;span class=&quot;sy&quot;&gt;:content_type&lt;/span&gt; =&amp;gt; original.content_type}
&lt;span class=&quot;no&quot;&gt; 5&lt;/span&gt;     store(dest_key, original, dest_bucket, default_options.merge(options))
&lt;span class=&quot;no&quot;&gt; 6&lt;/span&gt;     acl(dest_key, dest_bucket, acl(src_key, src_bucket))
&lt;span class=&quot;no&quot;&gt; 7&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 8&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt; 9&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;copy_to_bucket&lt;/span&gt;(dest_bucket, dest_key = &lt;span class=&quot;pc&quot;&gt;nil&lt;/span&gt;, options = {})
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/span&gt;     &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;.class.copy_across_buckets(bucket.name, key, dest_bucket, dest_key ? dest_key : key, options)
&lt;span class=&quot;no&quot;&gt;11&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  
  <entry>
    <title>RSpec stub_chain for Mocha</title>
    <link href="http://blog.leshill.org/blog/2009/05/05/rspec-stub-chain-for-mocha.html" />
    
    <id>tag:blog.leshill.org,2009-05-05:1241576025</id>
    
    <published>2009-05-05T22:13:45-04:00</published>
    <updated>2009-05-05T22:13:45-04:00</updated>
    <content type="html">&lt;p&gt;I am not at &lt;a href=&quot;http://en.oreilly.com/rails2009&quot;&gt;RailsConf&lt;/a&gt; but I have been following the tweets of my coworkers, so I heard about &lt;a href=&quot;http://rspec.info&quot;&gt;RSpec&lt;/a&gt;&amp;#8216;s new &lt;code&gt;stub_chain&lt;/code&gt; method.  Since I prefer &lt;a href=&quot;http://mocha.rubyforge.org&quot;&gt;Mocha&lt;/a&gt;&amp;#8217;s syntax to that of the built-in RSpec stubbing framework, I created a monkey patch to add &lt;code&gt;stub_chain&lt;/code&gt; to Mocha:&lt;/p&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;StubChainMocha&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 2&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;Object&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 3&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;stub_chain&lt;/span&gt;(*methods)
&lt;span class=&quot;no&quot;&gt; 4&lt;/span&gt;       &lt;span class=&quot;r&quot;&gt;while&lt;/span&gt; methods.length &amp;gt; &lt;span class=&quot;i&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 5&lt;/span&gt;         stubs(methods.shift).returns(&lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;)
&lt;span class=&quot;no&quot;&gt; 6&lt;/span&gt;       &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 7&lt;/span&gt;       stubs(methods.shift)
&lt;span class=&quot;no&quot;&gt; 8&lt;/span&gt;     &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 9&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;11&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;Object&lt;/span&gt;.send(&lt;span class=&quot;sy&quot;&gt;:include&lt;/span&gt;, &lt;span class=&quot;co&quot;&gt;StubChainMocha&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;Object&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Copy that into &lt;code&gt;spec/stub_chain_mocha.rb&lt;/code&gt; and then require it from &lt;code&gt;spec_helper.rb&lt;/code&gt;.&lt;/p&gt;</content>
  </entry>
  
  <entry>
    <title>Pairing With Hitch</title>
    <link href="http://blog.leshill.org/blog/2009/04/20/pairing-with-hitch.html" />
    
    <id>tag:blog.leshill.org,2009-04-20:1240258732</id>
    
    <published>2009-04-20T16:18:52-04:00</published>
    <updated>2009-04-20T16:18:52-04:00</updated>
    <content type="html">&lt;p&gt;Pair programming does present some unique problems, one that we encountered at &lt;a href=&quot;http://www.hashrocket.com&quot;&gt;Hashrocket&lt;/a&gt; was commit attribution: a commit message would be identified with one member of the pair only.  This is not exactly tragic, but from the perspective of a passioniate developer, having commit credit (and accountability) is a critical and visible part of the ethos.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://tpope.net&quot;&gt;Tim Pope&lt;/a&gt; had the brilliant idea of using a group email address with tags (such as &lt;em&gt;group+you@example.com&lt;/em&gt;) to identify the commits a pair made to git.  A little &lt;em&gt;bash script fu&lt;/em&gt; lead to a nifty command line utility that let us track pairs with our git commits.  With that script as a starting point, &lt;a href=&quot;http://blog.therubymug.com&quot;&gt;Ro Samour&lt;/a&gt; wrote a pure ruby implementation: &lt;code&gt;hitch&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;hitch&lt;/code&gt; will modify your git configuration to reflect who you are pairing with. Here is a &lt;code&gt;hitch&lt;/code&gt; commit message using &lt;code&gt;git log --pretty=full&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;commit e518dd0637e7d1d77d3bd79a645e5d0bc93eae2d
Author: Les Hill and Rogelio Samour &amp;lt;bleep+bleep+bleep@hashrocket.com&amp;gt;
Commit: Les Hill and Rogelio Samour &amp;lt;bleep+bleep+bleep@hashrocket.com&amp;gt;
 
    Adding show note icon&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is a commit message from &lt;code&gt;hitch&lt;/code&gt; on github:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/github_commit.png&quot; title=&quot;Github hitch commit message&quot; alt=&quot;Github hitch commit message&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;hitch&lt;/code&gt; is open source and is &lt;a href=&quot;http://github.com/therubymug/hitch/tree/master&quot;&gt;available&lt;/a&gt; from github.&lt;/p&gt;
&lt;h2&gt;Getting started&lt;/h2&gt;
&lt;p&gt;You will need to install the &lt;code&gt;hitch&lt;/code&gt; gem from github&lt;sup class=&quot;footnote&quot;&gt;&lt;a href=&quot;#fn1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;% sudo gem install therubymug-hitch&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You will need a group email account with a service such as &lt;a href=&quot;http://mail.google.com&quot;&gt;GMail&lt;/a&gt; that allows email tags&lt;sup class=&quot;footnote&quot;&gt;&lt;a href=&quot;#fn2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; (as an example, &lt;code&gt;news&lt;/code&gt; is a tag in this email address &lt;em&gt;yourname+news@example.com&lt;/em&gt; which is considered to be the same email address as &lt;em&gt;yourname@example.com&lt;/em&gt;):&lt;/p&gt;
&lt;p&gt;You really want a &lt;a href=&quot;http://gravatar.com&quot;&gt;Gravatar&lt;/a&gt; for your group email account so that the commits show the custom gravatar along with your commit messages.  For every pair, register a new gravatar and associate it with a tagged email address of the form:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dev+github_user_1+github_user_2@example.com&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The github usernames should appear in the local part of the address in alphabetical order after the group address local part, each github username seperated by a &lt;code&gt;+&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Initialize &lt;code&gt;hitch&lt;/code&gt; by running &lt;code&gt;hitchrc&lt;/code&gt; and giving it your name, github username, and group email address when prompted:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;% hitchrc&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;Using &lt;code&gt;hitch&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;To pair with another developer whose github username is &lt;code&gt;pair&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;% hitch pair&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;hitch&lt;/code&gt; will prompt you if it does not recognize github username of your pair and save it for later use.&lt;/p&gt;
&lt;p&gt;To unpair and code solo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;% unhitch&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To see who you are currently paired with:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;% hitch&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt; Add &lt;code&gt;github.com&lt;/code&gt; to your gem sources with &lt;code&gt;gem sources -a http://gems.github.com/&lt;/code&gt;&lt;/p&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn2&quot;&gt;&lt;sup&gt;2&lt;/sup&gt; Read about email tags on &lt;a href=&quot;http://en.wikipedia.org/wiki/E-mail_address#Sub-addressing&quot;&gt;Wikipedia&lt;/a&gt;&lt;/p&gt;&lt;!-- #hashrocket --&gt;</content>
  </entry>
  
  <entry>
    <title>Most Bugs Fall to the Second Pair of Eyes</title>
    <link href="http://blog.leshill.org/blog/2009/02/20/most-bugs-fall-to-the-second-pair-of-eyes.html" />
    
    <id>tag:blog.leshill.org,2009-02-20:1235183038</id>
    
    <published>2009-02-20T21:23:58-05:00</published>
    <updated>2009-02-20T21:23:58-05:00</updated>
    <content type="html">&lt;p&gt;While recently discussing if a power law applies to bugs at the ongoing seminar I sentimentally call &lt;em&gt;work&lt;/em&gt;, I noted a corollary to &lt;strong&gt;Linus&amp;#8217;s Law&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Linus&amp;#39;s_Law&quot;&gt;Linus&amp;#8217;s Law&lt;/a&gt; states:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Given enough eyeballs, all bugs are shallow&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The corollary is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Most bugs fall to the second pair of eyes&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That is, just having one other developer look at a bug will likely resolve it.  Of course, developer&amp;#8217;s who are &lt;a href=&quot;http://en.wikipedia.org/wiki/Pair_programming&quot;&gt;pair programming&lt;/a&gt; already know this and are ahead of the game.&lt;/p&gt;
&lt;p&gt;On a related note, pretty much every developer has been in the following situation.  You are called over by a collegue to look over a bug, often accompanied by the statement, &amp;#8216;This should work.&amp;#8217;  You give a cursory examination and you resolve the problem with a quick change, often one that is &lt;em&gt;obvious&lt;/em&gt; (after you pointed it out!)&lt;/p&gt;
&lt;p&gt;If you come away from that experience thinking &amp;#8216;Fresh pair of eyes&amp;#8217; or some such, good for you, you passed the test.&lt;/p&gt;
&lt;p&gt;If you come away from that experience thinking &amp;#8216;I am so awesome!&amp;#8217; or some such, not so good for you, you are probably not even competent.&lt;/p&gt;&lt;!-- #hashrocket --&gt;</content>
  </entry>
  
  <entry>
    <title>Velocity Is Not Destiny</title>
    <link href="http://blog.leshill.org/blog/2009/02/06/velocity-is-not-destiny.html" />
    
    <id>tag:blog.leshill.org,2009-02-06:1233953420</id>
    
    <published>2009-02-06T15:50:20-05:00</published>
    <updated>2009-02-06T15:50:20-05:00</updated>
    <content type="html">&lt;p&gt;One of the most persistent and pernicious stumbling blocks I see when a team is starting out with Agile&lt;sup class=&quot;footnote&quot;&gt;&lt;a href=&quot;#fn1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; is equating story points and velocity directly with hours.&lt;/p&gt;
&lt;p&gt;Often this stumbling block is not apparent immediately; it often crops up after a few iterations have passed.  As an example, a stakeholder who was new and unsure about agile, was eager to have a release a month into development as an affirmation of the decision to go with an agile approach.   After we had prioritized the feature set for the release, he turned to me and said, &amp;#8220;Let&amp;#8217;s see, we have 78 points in the release, so we can deliver the release four weeks from today.&amp;#8221;&lt;/p&gt;
&lt;p&gt;My answer, &amp;#8220;Not exactly&amp;#8221;, surprised him.&lt;/p&gt;
&lt;p&gt;If the velocity of the team is an evidence-based number using the teams own story point estimations, how could such a statement be incorrect?  There are two related reasons such a statement needs to be qualified to be useful, the &lt;em&gt;Planning Fallacy&lt;/em&gt; and &lt;em&gt;Velocity is not Destiny&lt;/em&gt;&lt;sup class=&quot;footnote&quot;&gt;&lt;a href=&quot;#fn2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;h3&gt;The Planning Fallacy&lt;/h3&gt;
&lt;p&gt;As described in the &lt;a href=&quot;http://www.overcomingbias.com/2007/09/planning-fallac.html&quot;&gt;Overcoming Bias&lt;/a&gt; blog, when students were asked in an experiment to forecast when they would complete an assignment:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;#8220;Even when asked to make a highly conservative forecast, a prediction that they felt virtually certain that they would fulfill, students&amp;#8217; confidence in their time estimates far exceeded their accomplishments.&amp;#8221;&lt;br /&gt;
  More generally, this phenomenon is known as the &amp;#8220;planning fallacy&amp;#8221;.  The planning fallacy is that people think they can plan, ha ha.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Since giving up on planning is not an option, we can make our estimates better through various techniques, one of which is to plan based on similarity to other known efforts, instead of estimations of time.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;a cross-cultural study, found that Japanese students expected to finish their essays 10 days before deadline.  They actually finished 1 day before deadline.  Asked when they had previously completed similar tasks, they responded, &amp;#8220;1 day before deadline.&amp;#8221;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Agile mitigates the planning fallacy by eschewing estimates in hours or days and using story points&lt;sup class=&quot;footnote&quot;&gt;&lt;a href=&quot;#fn3&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;.  Story points are abstract esitmations based on similarity; a 4 point story should be of the same relative size or complexity as any other 4 point story.  Time is not a factor with story points.&lt;/p&gt;
&lt;h3&gt;Velocity is not Destiny&lt;/h3&gt;
&lt;p&gt;Given that story points yield better estimates, and velocity is an evidence based aggregate number smoothing out variations in individual stories, why qualify saying we can deliver four weeks from today?  Velocity is a continuous measurement of the past performance of your team and is not a constant.  The velocity of your team is a dynamic variable giving you direct and constant insight into how they are progressing.  A future iteration has no velocity, as it has not been (and cannot yet be) measured.  We can make predictions about future iterations based on velocity, but we cannot make any iron-clad guarantees.&lt;/p&gt;
&lt;p&gt;An analogy might help explain how to think of velocity.  You are taking a long automobile trip you have never taken before, where you will leave at 9 a.m.  and travel 250 miles to arrive at your destination.  Your car will accurately report your average velocity on the trip.  125 miles into the trip, your car reports an average velocity of 62.5 miles per hour, and you are currently on the highway going 70 miles per hour.  How long do you have left, and how much money would you bet that you are accurate within one minute?  Intuitively, most people understand that although the very clear math says you are 2 hours away from your destination, there are too many pitfalls such as traffic, accidents, road work, weather conditions, signals, etc to make a prediction that is accurate to the minute. (With your final average velocity, the very clear math will yield an exact and accurate result.)&lt;/p&gt;
&lt;h3&gt;Making the Release&lt;/h3&gt;
&lt;p&gt;There are many pitfalls in any software project, the one which was making me cautious about our release was a common one for novice stakeholders, &lt;strong&gt;Release Induced Focus&lt;/strong&gt;.  &lt;strong&gt;RIF&lt;/strong&gt; is the tendancy for novice stakeholders to only really pay attention when they have an immediate release pending, leading to a spike in the number of stories rejected and bugs filed, and a corresponding drop in velocity.  Given an experienced stakeholder who is rigorous about acceptance, the &lt;em&gt;bug tax on velocity&lt;/em&gt; is taken out of velocity over time; with &lt;strong&gt;RIF&lt;/strong&gt; the entire &lt;em&gt;bug tax on velocity&lt;/em&gt; is paid in one or two velocity sapping iterations.&lt;/p&gt;
&lt;p&gt;After explaining this, and using velocity as a predictor, we adjusted our plan for the release.  We reprioritized the backlog to front load all the required features, moved unneeded features out of the release, and had the stakeholders exercise more rigor when doing their acceptance.  The release was made in four weeks, with the team and stakeholders delivering tangible value without the long hours and anxiety provoked by more static approaches to software project management.&lt;/p&gt;
&lt;h3&gt;Velocity is a Dynamic Measure&lt;/h3&gt;
&lt;p&gt;Velocity is a continous measurement of your team&amp;#8217;s past performance over time; all of the previously known and unknown risk variables have been surfaced, made known, become constants, and reduced to one accurate numeric measure.  What velocity does not tell you is what the future holds.  To quote every mutual fund prospectus ever written:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Past Performance is no Guarantee of Future Results&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Understanding that velocity is accurate &lt;strong&gt;and&lt;/strong&gt; dynamic is key to using it for iteration planning.  Most other software project management methodologies pretend that the project is static in all aspects, that all variables are known and quantified.  Agile acknowledges that a software project is a dynamic system, and provides simple evidence based tools to manage the dynamism inherent in building new software.&lt;/p&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt; I use the term to encompass the variations of Agile methodologies that use story points and velocity.&lt;/p&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn2&quot;&gt;&lt;sup&gt;2&lt;/sup&gt; I first heard this poetic phrase from Amy Kline, an awesome scrum master and friend.&lt;/p&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn3&quot;&gt;&lt;sup&gt;3&lt;/sup&gt; Peter Jackson has written a great summary of why we use story points in &lt;a href=&quot;http://blog.peteonrails.com/articles/2009/02/05/the-case-for-story-points/&quot;&gt;The Case for Story Points&lt;/a&gt; .&lt;/p&gt;&lt;!-- #hashrocket --&gt;</content>
  </entry>
  
  <entry>
    <title>Nothing Special</title>
    <link href="http://blog.leshill.org/blog/2009/01/25/nothing-special.html" />
    
    <id>tag:blog.leshill.org,2009-01-25:1232933310</id>
    
    <published>2009-01-25T20:28:30-05:00</published>
    <updated>2009-01-25T20:28:30-05:00</updated>
    <content type="html">&lt;p&gt;For those of us in a certain part of tech community, this quote from &lt;a href=&quot;http://www.ritholtz.com/blog/2009/01/microsoft-zune-down-54/&quot;&gt;Barry Ritholtz&lt;/a&gt; is old news:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It just goes to show you that Microsoft, without the advantages of the Windows/Office monopoly, is simply just another ordinary company â€” nothing special, nothing innovative.&lt;/p&gt;
&lt;/blockquote&gt;</content>
  </entry>
  
  <entry>
    <title>Webby, Meet GitHub Pages</title>
    <link href="http://blog.leshill.org/blog/2009/01/24/webby-meet-github-pages.html" />
    
    <id>tag:blog.leshill.org,2009-01-24:1232819655</id>
    
    <published>2009-01-24T12:54:15-05:00</published>
    <updated>2009-01-24T12:54:15-05:00</updated>
    <content type="html">&lt;p&gt;As of this post, this blog is now hosted by GitHub&amp;#8217;s recently announced &lt;a href=&quot;http://github.com/blog/272-github-pagesi&quot;&gt;GitHub Pages&lt;/a&gt;, still &lt;a href=&quot;http://webby.rubyforge.org&quot;&gt;Webby&lt;/a&gt; powered, now with extra &lt;em&gt;git&lt;/em&gt; goodness.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;GitHub Pages&lt;/strong&gt; generates a static site from a GitHub hosted repo, using &lt;a href=&quot;http://github.com/mojombo/jekyll&quot;&gt;Jekyll&lt;/a&gt; to generate the files.  &lt;strong&gt;Jekyll&lt;/strong&gt; understands two special directories &lt;code&gt;_posts&lt;/code&gt; and &lt;code&gt;_layouts&lt;/code&gt;, copying any other files and directories in the root of the repo that do not begin with an &lt;code&gt;_&lt;/code&gt; directly to the static site.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Webby&lt;/strong&gt; generates a static site from set of source files (&lt;code&gt;content&lt;/code&gt;, &lt;code&gt;layouts&lt;/code&gt;, etc), placing the results in the &lt;code&gt;output_dir&lt;/code&gt; (defaults to &lt;code&gt;output&lt;/code&gt; but can be changed.)&lt;/p&gt;
&lt;p&gt;To make &lt;strong&gt;Webby&lt;/strong&gt; and &lt;strong&gt;GitHub Pages&lt;/strong&gt; co-exist, I restructured my repo and made the following changes to my existing &lt;strong&gt;Webby&lt;/strong&gt; site:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The root of the repo is the &lt;code&gt;output_dir&lt;/code&gt; for &lt;strong&gt;Webby&lt;/strong&gt;&lt;/li&gt;
	&lt;li&gt;The &lt;strong&gt;Webby&lt;/strong&gt; site (source files) are in a subdirectory name &lt;code&gt;_webby&lt;/code&gt;&lt;/li&gt;
	&lt;li&gt;The &lt;code&gt;webby&lt;/code&gt; command line tool should be run from within the &lt;code&gt;_webby&lt;/code&gt; directory, not the root of the repo&lt;/li&gt;
	&lt;li&gt;The &lt;strong&gt;Webby&lt;/strong&gt; &lt;code&gt;clobber&lt;/code&gt; target is overridden to ignore the &lt;code&gt;_webby&lt;/code&gt; directory&lt;/li&gt;
	&lt;li&gt;&lt;code&gt;Sitefile&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;SITE&lt;/span&gt;.output_dir = &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;2&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;3&lt;/span&gt; task &lt;span class=&quot;sy&quot;&gt;:default&lt;/span&gt; =&amp;gt; &lt;span class=&quot;sy&quot;&gt;:clean_build&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;code&gt;lib/override.rb&lt;/code&gt; Rake monkey patch to allow overriding tasks found &lt;a href=&quot;http://www.taknado.com/2007/7/30/overriding-rake-tasks&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# From http://www.taknado.com/2007/7/30/overriding-rake-tasks&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;Rake&lt;/span&gt;::&lt;span class=&quot;co&quot;&gt;TaskManager&lt;/span&gt;.class_eval &lt;span class=&quot;r&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 3&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;remove_task&lt;/span&gt;(task_name)
&lt;span class=&quot;no&quot;&gt; 4&lt;/span&gt;     &lt;span class=&quot;iv&quot;&gt;@tasks&lt;/span&gt;.delete(task_name.to_s)
&lt;span class=&quot;no&quot;&gt; 5&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 7&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;remove_task&lt;/span&gt;(task_name)
&lt;span class=&quot;no&quot;&gt; 9&lt;/span&gt;   &lt;span class=&quot;co&quot;&gt;Rake&lt;/span&gt;.application.remove_task(task_name)
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;11&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;override_task&lt;/span&gt;(args, &amp;amp;block)
&lt;span class=&quot;no&quot;&gt;13&lt;/span&gt;   name, deps = &lt;span class=&quot;co&quot;&gt;Rake&lt;/span&gt;.application.resolve_args([args])  
&lt;span class=&quot;no&quot;&gt;14&lt;/span&gt;   remove_task &lt;span class=&quot;co&quot;&gt;Rake&lt;/span&gt;.application[name].name
&lt;span class=&quot;no&quot;&gt;15&lt;/span&gt;   task(args, &amp;amp;block)
&lt;span class=&quot;no&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;code&gt;tasks/github_pages.rake&lt;/code&gt; redefines &lt;code&gt;clobber&lt;/code&gt;  to ignore the &lt;code&gt;_webby&lt;/code&gt; directory and the new (default) &lt;code&gt;clean_build&lt;/code&gt; task allows for file deletions&lt;sup class=&quot;footnote&quot;&gt;&lt;a href=&quot;#fn1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# We only want to remove the generated files&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 2&lt;/span&gt; desc &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Delete the website&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 3&lt;/span&gt; override_task &lt;span class=&quot;sy&quot;&gt;:clobber&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;do&lt;/span&gt; |t|
&lt;span class=&quot;no&quot;&gt; 4&lt;/span&gt;   &lt;span class=&quot;co&quot;&gt;Dir&lt;/span&gt;.chdir(&lt;span class=&quot;co&quot;&gt;Webby&lt;/span&gt;.site.output_dir) &lt;span class=&quot;r&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 5&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;Dir&lt;/span&gt;[&lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;/span&gt;].entries.reject {|entry| entry == &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;_webby&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;/span&gt;}.each {|entry| rm_rf entry}
&lt;span class=&quot;no&quot;&gt; 6&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt; 8&lt;/span&gt; 
&lt;span class=&quot;no&quot;&gt; 9&lt;/span&gt; desc &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;Clobber, then build the website&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/span&gt; task &lt;span class=&quot;sy&quot;&gt;:clean_build&lt;/span&gt; =&amp;gt; [&lt;span class=&quot;sy&quot;&gt;:clobber&lt;/span&gt;, &lt;span class=&quot;sy&quot;&gt;:build&lt;/span&gt;]&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The new workflow for adding a post to the new site is:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Change directory to &lt;code&gt;_webby&lt;/code&gt;&lt;/li&gt;
	&lt;li&gt;Generate a new blog post&lt;/li&gt;
	&lt;li&gt;Run &lt;code&gt;webby autobuild&lt;/code&gt;&lt;/li&gt;
	&lt;li&gt;Edit until completed&lt;/li&gt;
	&lt;li&gt;Commit all changes locally (&lt;code&gt;git add .&lt;/code&gt; from the root)&lt;/li&gt;
	&lt;li&gt;Push the changes&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;footnote&quot; id=&quot;fn1&quot;&gt;&lt;sup&gt;1&lt;/sup&gt; Webby does not know if you have deleted a source file, by forcing the entire site to be rebuilt, the deletion is reflected in the generated static files.&lt;/p&gt;</content>
  </entry>
  
  <entry>
    <title>Using Hoptoad With Script Runner</title>
    <link href="http://blog.leshill.org/blog/2009/01/12/using-hoptoad-with-script-runner.html" />
    
    <id>tag:blog.leshill.org,2009-01-12:1231772509</id>
    
    <published>2009-01-12T10:01:49-05:00</published>
    <updated>2009-01-12T10:01:49-05:00</updated>
    <content type="html">&lt;p&gt;I have been using &lt;a href=&quot;http://hoptoadapp.com/&quot;&gt;Hoptoad&lt;/a&gt; to track exceptions in my Rails apps for a while now.  The standard setup tracks exceptions in your controllers with a simple &lt;code&gt;include HoptoadNotifier::Catcher&lt;/code&gt; in your &lt;code&gt;application.rb&lt;/code&gt;, easy!&lt;/p&gt;
&lt;p&gt;However, I also wanted &lt;strong&gt;Hoptoad&lt;/strong&gt; to track any exception which occurred in a cron job that was running with &lt;code&gt;script/runner&lt;/code&gt;.  Again, a snap with &lt;strong&gt;Hoptoad&lt;/strong&gt;, take a look:&lt;/p&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;cl&quot;&gt;CronJob&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;pc&quot;&gt;self&lt;/span&gt;.process
&lt;span class=&quot;no&quot;&gt;3&lt;/span&gt;     &lt;span class=&quot;c&quot;&gt;# do stuff&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;4&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;rescue&lt;/span&gt; =&amp;gt; ex
&lt;span class=&quot;no&quot;&gt;5&lt;/span&gt;     &lt;span class=&quot;co&quot;&gt;HoptoadNotifier&lt;/span&gt;.notify(ex)
&lt;span class=&quot;no&quot;&gt;6&lt;/span&gt;   &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</content>
  </entry>
  
  <entry>
    <title>Using S3 Authenticated-Read With Paperclip</title>
    <link href="http://blog.leshill.org/blog/2009/01/01/using-s3-authenticated-read-with-paperclip.html" />
    
    <id>tag:blog.leshill.org,2009-01-01:1230821176</id>
    
    <published>2009-01-01T09:46:16-05:00</published>
    <updated>2009-01-01T09:46:16-05:00</updated>
    <content type="html">&lt;p&gt;&lt;a href=&quot;:http://www.thoughtbot.com/projects/paperclip&quot;&gt;Paperclip&lt;/a&gt; supports &lt;strong&gt;AWS S3&lt;/strong&gt; with a default of &lt;em&gt;public-read&lt;/em&gt; access policy.  This allows anyone who knows the URL of the resource to access it.&lt;/p&gt;
&lt;p&gt;For some applications, you might want a more restricted access policy.  The &lt;em&gt;authenticated-read&lt;/em&gt; access policy requires that the URL of the resource be presented by an authenticated user.&lt;/p&gt;
&lt;p&gt;To use &lt;em&gt;authenticated-read&lt;/em&gt; with &lt;strong&gt;Paperclip&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;set the &lt;code&gt;:s3_permissions&lt;/code&gt; option on your attachment:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;sy&quot;&gt;:s3_permssions&lt;/span&gt; =&amp;gt; &lt;span class=&quot;s&quot;&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;authenticated-read&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;use &lt;code&gt;RightAws::S3Interface#get_link&lt;/code&gt; to generate an &lt;em&gt;authenticated-read&lt;/em&gt; URL for the attachment:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;CodeRay&quot;&gt;
  &lt;div class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;no&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;s3_url&lt;/span&gt;(style = &lt;span class=&quot;pc&quot;&gt;nil&lt;/span&gt;, time_limit = &lt;span class=&quot;i&quot;&gt;15&lt;/span&gt;.minutes)
&lt;span class=&quot;no&quot;&gt;2&lt;/span&gt;   attachment.s3.interface.get_link(attachment.s3_bucket.to_s, attachment.path(style), time_limit)
&lt;span class=&quot;no&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;r&quot;&gt;end&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If you do not normally need to time limit the access, use &lt;code&gt;nil&lt;/code&gt; as the default value for &lt;code&gt;time_limit&lt;/code&gt;&lt;/p&gt;</content>
  </entry>
  
</feed>
